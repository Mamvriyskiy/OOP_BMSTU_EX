>**Полная формулировка вопроса:** Концепции информационного моделирования. Понятие атрибута. Типы атрибутов. Правила атрибутов. Понятие связи. Типы связей. Формализация связей. Композиция связей. Подтипы и супертипы. Диаграмма сущность-связь.

***

>Объектно-ориентированный подход - подход белого ящика. Мы идем от сущности, которая у нас реально существует, и из чего состоят эти сущности. Начинается всё с информационного моделирования.

>Задачи информационного моделирования - выявить основные сущности, базовые абстракции, с которым нам необходимо работать. 

Документы, получаемые при моделировании: 
- описание классов и их атрибуты.
- описание связей

> Всегда разработка начинается с физических сущностей, которые существуют. Вот есть задача, рассматривается задача на примерах с физическими сущностями. Пытаемся выделить характеристики этих объектов

 >У нас есть объект. Мы выделяем, что характеризует этот объект. Естественно, это зависит от той задачи, которая нам требуется. Мы подходим не "что нам делать", а "чем характеризуется". Мы выделяем атрибуты объектов, характеристики. Любая характеристика, которая нас заинтересовала, абстрагируется как атрибут.
## Атрибуты

#### Атрибуты делятся на:
- Идентифицирующие или указывающие. Идентификатор - набор из одного или нескольких атрибутов, которые четко идентифицируют объект. Атрибуты, которые мы объединили в понятии идентификатор, являются идентифицирующими. Еще их называют указывающими атрибутами.  
- Описательные. Любая характеристика объекта, которая его описывает.
- Вспомогательные. Мы их вводим для формализации связей и состояния (статус).

>Для каждого атрибута мы смотрим, какие значения он может принимать, то есть определяем его множество значений. Это нужно для того, чтобы в дальнейшем понять, какого типа этот атрибут.
#### Правила атрибутов

1. Для данного объекта каждый атрибут в любой момент времени должен иметь значение. Не может быть такого, чтобы какой-то атрибут не был определен. Это значение должно быть единственным. Если, когда мы выделили какую-то сущность, в ней появился объект, который мы отнесли к этой сущности, но у него, возможно, какой-то атрибут не определен — значит, объект относится к другой сущности.

2. Атрибут не должен содержать внутренней структуры. Он не должен быть для нас сложным. Это что-то простое, например: вес, рост и так далее. Если есть внутренняя струкутра, то надо выделить какую-то внешнюю сущность.

3. Когда атрибут имеет составной идентификатор, каждый атрибут, который является частью идентификатора, представляет характеристику всего объекта, а не его части, ну и тем более не характеристику чего-либо другого. Например, для студента, ФИО — это всё характеристики самого объекта, самого студента, а не его части.

4. Любой описательный атрибут должен быть характеристикой объекта данного класса, а  не его части, ну и тем более не характеристикой какого-либо другого атрибута. Это типичная ошибка - добавить атрибуты, которые характеризуют другие атрибуты или части объекта.
## Связи

>Между сущностями есть связи, и эту связь мы должны задать из перспективы каждого участвующего объекта. Связи могут быть разными.

R - внутренняя связь. E - внешняя связь. 

#### Типы связей по множествам:
- 1. **Один к одному**.
    Например, _муж <-----> жена_. Хотя в некоторых других странах, например, арабских, у одного мужа может быть несколько жен...
    
2. **Один ко многим.**
    Например, _преподаватель <----->-> студент_. У каждого студента на кафедре должен быть руководитель. Но у преподавателя может быть несколько студентов.
    
3. **Многие ко многим.**
    Например, _учебный курс <-<----->-> студент_. Один учебный курс могут прослушивать многие студенты. Один студент может прослушивать несколько учебных курсов.
### Типы связей по условности:

1. **Безусловная связь.**
    
2. **Условная связь.**
    В определенных ситуациях объекты могут не участвовать в связи. Рассмотрим пример: _преподаватель <--->> руководитель_. У каждого студента должен быть руководитель, но у преподавателя может не быть студентов, которыми он руководит в данный момент. В этом случае мы со стороны объекта, который может не участвовать в связи, ставим буковку у - условная связь.
    
3. **Биусловная связь**.  
    Случай, когда с двух сторон объекты не участвуют в связи. Это редко, но возможно.

## Формализация связей

#### Один ко одному

Если у нас связь, например, муж-жена. Как мы формализуем? Есть id мужа и id жены.

>Мы добавляем вспомогательный атрибут к одному из участвующих из объектов. К кому? К тому, кто наиболее осведомлен. Кто главный, жена или муж? Пусть будет муж. Добавляем мужу id жены, и тут мы должны указать на связь. И для этого мы каждую связь помечаем идентификатором, и если это внутренняя связь, то она обозначается буквой R, потом идет номер связи, уникальный в каждом домене. Помечаем, что этот атрибут устанавливает эту связь.

>Когда это безусловная связь, то на один из объектов накладывается условие жизни другого объекта. В истории, раньше, если умирал какой-то руководитель, царь, то его хоронили вместе с женой... идея понятна? Надо бы устранить недостаток, и не хоронить жену вместе с мужем.

>Можем ли мы формализовать эту связь ассоциативным объектом? Нужен ли в связи мужа и жены посредник?

>Если мы четко знаем, что у нас время жизни двух объектов полностью совпадают, тогда мы можем четко формализовать один к одному с помощью добавления вспомогательного атрибута к одному из объектов. **Но если время время жизни объектов не совпадает, и нам важно во время выполнения программы чтобы объекты могли появляться/уничтожаться, в этом случае вышеописанным способом формализовать нельзя.** В этом случае нам нужен объект, отвечающий за эту связь, посредник - ассоциативный объект. Он будет держать эту связь, и тогда у нас не возникнет проблем с жизненными циклами. Теперь и жена может стать вдовой, и муж вдовцом.

#### Один ко многим

>С какой стороны формализовать эту связь? Вспомним второе правило атрибутов: атрибут не должен содержать внутренней структуры. По этой причине, когда связь у нас один ко многим, мы не можем ее формализовать со стороны одного, мы должны формализовать её со стороны многих.

>В данном примере мы добавляем идентификатор преподавателя. Получается, студент главный!

>Со стороны многих стоит объект рангом ниже, чем объект со стороны одного: он не может формализовать связь. В этом случае мы можем формализовать связь ассоциативным объектом.

#### Многие ко многим

Мы не можем формализовать связь ни с одной стороны, ни с другой. Для этого добавляют так называемый ассоциативный объект, задача которого - формализовать эту связь.

>Пусть у каждого есть квартира, причем не одна. Более того - у одной квартиры может быть несколько собственников. Создадим ассоциативный объект - владение. Идентификатором владения является как id собственника, так и id квартиры. Этот ассоциативный объект, который формализует связь многие ко многим, кроме атрибутов, формализующих связь (_если для обычного объекта это были вспомогательные атрибуты, то тут они являются идентифицирующими_), может иметь дополнительные атрибуты: доля владения данной квартирой, дата приобретения и так далее.

> Примечание про ассоциативную связь. С помощью ассоциативной связи мы реализуем связи многие ко многим и любую связь, которая имеет динамическое поведение, то есть может меняться во время работы программы. Связь может исчезать, объект может меняться с одной стороны... за это должен отвечать ассоциативный объект. Когда мы четко должны выстроить иерархию, кто главный, а кто нет - в этом случае главенство передается этому объекту.
#### Что нужно для связи
- Идентификатор связи
- Формулировка связи со стороны каждого участвующего объекта связи
- Вид связи (один к одному, один ко многим, многие ко многим)
- Формализация связи (или добавлением вспомогательного атрибута, или добавлением ассоциативного объекта)
- Формулировка основания связи (зачем нам нужна эта связь)
#### Композиция связей

На информационной модели некоторые связи могут быть следствием других связей.

![[cs.png]]

Есть связь студента с кафедрой, и есть связь студента с преподавателем. Получился треугольник. Когда получился такой треугольник, мы одну из связей формализуем как композицию других. Избыточностей связей не должно быть.

R3 = R1 + R2 - композиция других связей.

Те связи, которые являются следствием других связей, на диаграмме сущностей мы не формализуем.

## Суперкласс

>Мы выделяем характеристики для какого-то объекта, четко определяя множество значений для каждого атрибута.

>Возможно такая ситуация, когда объект мы отнесли к какому-то классу, но для него этого атрибута нет. Или мы отнесли два объекта к разным сущностям, разным классам, но они имеют общие атрибуты. В этом случае мы должны объединять эти классы так называемым суперклассом. Атрибуты, являющиеся общими для разных классов, нужно выносить в этот суперкласс, а все остальные атрибуты, которыми отличаются объекты, будут в подклассах.

>В объекно-ориентированном анализе суперкласс - всегда абстрактное понятие. Мы не рассматриваем объекты суперклассов. Объекты могут порождаться только за счет использования подклассов.

![[sc.png]]

>Бак - суперкласс. Конкретные баки: бак для хранения, бак для смешивания и бак с подогревом. На диаграмме рисуется связь, помещающаяся черточкой. Идентификатор связи для связи подкласса с суперклассом, как правило, начинается с цифры 100.

>На этом уровне (информационного моделирования) нас не интересует поведение этих объектов. Мы только строим эту диаграмму, анализируя атрибуты классы, объединяя их по общим атрибутам. Мы получили информационную модель.

## Диаграмма сущность-связь

В диаграмме сущность-связь на информационной модели сущности располагаем в прямоугольнике.

Как описать сущность:
1. Каждой сущности мы присваиваем **уникальный номер**. Он должен быть уникальным в нашем домене.
2. Мы присваиваем **имя сущности**. Нужно стремится, чтобы это было существительное... но это не всегда так.
3. **Ключевой литерал** - для удобства работы, например, чтобы не расписывать полностью имя сущности, которое мы выделили.
4. **Атрибуты**. Если это привилегированный идентификатор, атрибут который указывает, мы его помечаем звездочкой. Все остальные атрибуты мы просто перечисляем.
